<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>Browse.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sxr -- Scala X-Ray
 * Copyright 2009, 2010 Mark Harrah, Olivier Michallat
 */</span>

<span class="keyword">package</span> sxr

<span class="keyword">import</span> scala.tools.nsc.<span class="delimiter">{</span>ast, plugins, symtab, util, Global<span class="delimiter">}</span>
<span class="keyword">import</span> ast.parser.Tokens
<span class="keyword">import</span> plugins.Plugin
<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> util.SourceFile

<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File, Reader, Writer<span class="delimiter">}</span>
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> forScope._

<span class="keyword">import</span> <a href="OutputFormat.scala.html#9544" title="object sxr.OutputFormat">OutputFormat</a>.<span class="delimiter">{</span>OutputFormat, getWriter<span class="delimiter">}</span>
<span class="keyword">import</span> <a href="#9479" title="object sxr.Browse">Browse</a>._
<span class="keyword">import</span> scala.io.Source

<span class="keyword">object</span> <a title="object sxr.Browse" id="9479">Browse</a>
<span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/** The path to a link index, which allows linking between runs.  This applies for both incremental and remote linking.*/</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="26744">LinkIndexRelativePath</a> = <span title="java.lang.String(&quot;link.index&quot;)" class="string">&quot;link.index&quot;</span>
  <span class="comment">/** The path to a compressed link index, which allows linking between runs.  This applies for both incremental and remote linking.*/</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="26746">CompressedLinkIndexRelativePath</a> = <a href="#26744" title="=&gt; java.lang.String">LinkIndexRelativePath</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.gz&quot;)" class="string">&quot;.gz&quot;</span>
  <span class="comment">/** The name of the directory containing cached remote `link.index`es*/</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="26748">CacheRelativePath</a> = <span title="java.lang.String(&quot;cache.sxr&quot;)" class="string">&quot;cache.sxr&quot;</span>
<span class="delimiter">}</span>

case <span class="keyword">class</span> <a title="class FileWithLineCount extends java.lang.Object with ScalaObject with Product with Serializable" id="51776">FileWithLineCount</a><a href="#51776" title="ScalaObject" class="delimiter">(</a><a title="java.io.File" id="39541">file</a>:<span title="java.io.File">File</span>,<a title="Option[Int]" id="39542">lineCount</a>:<span title="Option[Int]">Option</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span title="object None">None</span><span class="delimiter">)</span>

<span class="comment">/** The actual work extracting symbols and types is done here. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Browse extends scala.tools.nsc.plugins.Plugin with ScalaObject" id="9484">Browse</a> <a href="#9484" title="ScalaObject" class="keyword">extends</a> <span title="scala.tools.nsc.plugins.Plugin">Plugin</span>
<span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="=&gt; java.io.File" id="27050">classDirectory</a>: <span title="java.io.File">File</span>
  <span class="comment">/** The output formats to write */</span>
  <span class="keyword">def</span> <a title="=&gt; List[sxr.OutputFormat.OutputFormat]" id="27051">outputFormats</a>: <span title="List[sxr.OutputFormat.OutputFormat]">List</span><span class="delimiter">[</span>OutputFormat<span class="delimiter">]</span>
  <span class="comment">/** The URLs of external sxr locations */</span>
  <span class="keyword">def</span> <a title="=&gt; List[java.net.URL]" id="27052">externalLinkURLs</a>: <span title="List[java.net.URL]">List</span><span class="delimiter">[</span>URL<span class="delimiter">]</span>
  <span class="comment">/** Relativizes the path to the given Scala source file against the base directories. */</span>
  <span class="keyword">def</span> <a title="(source: java.io.File)String" id="27053">getRelativeSourcePath</a><span class="delimiter">(</span><a title="java.io.File" id="37824">source</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="String">String</span>
  <span class="comment">/** The compiler.*/</span>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="27054">global</a>: <span title="scala.tools.nsc.Global">Global</span>

  <span class="keyword">import</span> <a href="#27054" title="=&gt; scala.tools.nsc.Global">global</a>._

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.io.File" id="27057">outputDirectory</a> = <span title="(x$1: java.io.File, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#27050" title="=&gt; java.io.File">classDirectory</a>.<span title="()java.io.File">getParentFile</span>, <a href="#27050" title="=&gt; java.io.File">classDirectory</a>.<span title="()java.lang.String">getName</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.sxr&quot;)" class="string">&quot;.sxr&quot;</span><span class="delimiter">)</span>
  <a href="#27056" title="=&gt; java.io.File">outputDirectory</a>.<span title="()Boolean">mkdirs</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="java.io.File" id="27058">linkIndexFile</a> = <span title="(x$1: java.io.File, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#27056" title="=&gt; java.io.File">outputDirectory</a>, <a href="#26744" title="=&gt; java.lang.String">LinkIndexRelativePath</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; sxr.LinkMapStore" id="27060">linkStore</a> = <span title="sxr.LinkMapStore" class="keyword">new</span> <a href="LinkMap.scala.html#9539" title="sxr.LinkMapStore">LinkMapStore</a><span class="delimiter">(</span><a href="#27058" title="=&gt; java.io.File">linkIndexFile</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(f: List[java.io.File])Any" id="27061">writeSubDirectoryIndex</a><span class="delimiter">(</span><a title="List[java.io.File]" id="37844">f</a>:<span title="List[java.io.File]">List</span><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span><span class="delimiter">{</span>

      <span class="keyword">def</span> <a title="(file: java.io.File)java.lang.String" id="37847">path</a><span class="delimiter">(</span><a title="java.io.File" id="37849">file</a>:<span title="java.io.File">File</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Array[String]" id="37850">s</a> = <a href="#37849" title="java.io.File">file</a>.<span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">getCanonicalPath</span>.<span title="(separator: Char)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="object java.io.File">File</span>.<span title="Char">separatorChar</span><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Array[String]">dropWhile</span><span class="delimiter">(</span><span title="java.lang.String(&quot;scala&quot;)" class="string">&quot;scala&quot;</span> <a href="#39066" title="(x$1: AnyRef)Boolean">!=</a> <span class="delimiter">)</span>
 
        <a href="#27056" title="=&gt; java.io.File">outputDirectory</a>.<span title="()java.lang.String">toString</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="object java.io.File">File</span>.<span title="java.lang.String">separator</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">{</span>
          <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#37850" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">s</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
            <a href="#37850" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">s</a>.<span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">tail</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="object java.io.File">File</span>.<span title="java.lang.String">separator</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> 
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
 
      <span class="keyword">val</span> <a title="List[sxr.FileWithLineCount]" id="37848">e</a> = <a href="#37844" title="List[java.io.File]">f</a>.<span title="(f: java.io.File =&gt; sxr.FileWithLineCount)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.io.File],sxr.FileWithLineCount,List[sxr.FileWithLineCount]])List[sxr.FileWithLineCount]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,sxr.FileWithLineCount,List[sxr.FileWithLineCount]]" class="delimiter">{</span><a title="java.io.File" id="39540">a</a> =&gt;
        <a href="#51776" title="(file: java.io.File, lineCount: Option[Int])sxr.FileWithLineCount">FileWithLineCount</a><span class="delimiter">(</span><a href="#39540" title="java.io.File">a</a>,<a href="FileUtil.scala.html#9518" title="object sxr.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#11942" title="(f: java.io.File)Option[Int]">lineCount</a><span class="delimiter">(</span><a href="#39540" title="java.io.File">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#37848" title="List[sxr.FileWithLineCount]">e</a>.<span title="(f: sxr.FileWithLineCount =&gt; java.lang.String)scala.collection.immutable.Map[java.lang.String,List[sxr.FileWithLineCount]]">groupBy</span><span class="delimiter">{</span><a title="sxr.FileWithLineCount" id="41913">b</a> =&gt; <a href="#37847" title="(file: java.io.File)java.lang.String">path</a><span class="delimiter">(</span><a href="#41913" title="sxr.FileWithLineCount">b</a>.<a href="#39541" title="=&gt; java.io.File">file</a>.<span title="()java.io.File">getParentFile</span><span class="delimiter">)</span><span class="delimiter">}</span>.<span title="(f: (java.lang.String, List[sxr.FileWithLineCount]) =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[java.lang.String,List[sxr.FileWithLineCount]],Unit,scala.collection.immutable.Iterable[Unit]])scala.collection.immutable.Iterable[Unit]">map</span><a href="#42245" title="Unit" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="Unit" class="delimiter">(</span><a title="java.lang.String" id="42248">dir</a>,<a title="List[sxr.FileWithLineCount]" id="42249">files</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Array[sxr.FileWithLineCount]" id="42250">directories</a> = <a href="#42249" title="List[sxr.FileWithLineCount]">files</a>.<span title="=&gt; sxr.FileWithLineCount">head</span>.<a href="#39541" title="=&gt; java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>.<span title="(xs: Array[java.io.File])scala.collection.mutable.ArrayOps[java.io.File]">listFiles</span>.<span title="(pf: PartialFunction[java.io.File,sxr.FileWithLineCount])(implicit bf: scala.collection.generic.CanBuildFrom[Array[java.io.File],sxr.FileWithLineCount,Array[sxr.FileWithLineCount]])Array[sxr.FileWithLineCount]">collect</span><a href="#42581" title="sxr.FileWithLineCount" class="delimiter">{</a>
            <span class="keyword">case</span> <a title="sxr.FileWithLineCount" id="42582">d</a> <span class="keyword">if</span> <a href="#42582" title="java.io.File">d</a>.<span title="()Boolean">isDirectory</span> =&gt;
            <a href="#51776" title="(file: java.io.File, lineCount: Option[Int])sxr.FileWithLineCount">FileWithLineCount</a><span class="delimiter">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#37847" title="(file: java.io.File)java.lang.String">path</a><span class="delimiter">(</span><a href="#42582" title="java.io.File">d</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="comment">//TODO </span>
          <span class="keyword">val</span> <a title="java.io.File" id="42251">d</a> = <span title="(x$1: java.lang.String, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span> <a href="#42248" title="java.lang.String">dir</a> , <a href="HtmlWriter.scala.html#9525" title="object sxr.HtmlWriter">HtmlWriter</a>.<a href="HtmlWriter.scala.html#42668" title="=&gt; java.lang.String">IndexRelativePath</a> <span class="delimiter">)</span>
          <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#42248" title="java.lang.String">dir</a><span class="delimiter">)</span>.<span title="()Boolean">mkdirs</span>
          <span class="keyword">val</span> <a title="List[sxr.FileWithLineCount]" id="42252">list</a> = <a href="#42249" title="List[sxr.FileWithLineCount]">files</a>.<span title="(f: sxr.FileWithLineCount =&gt; sxr.FileWithLineCount)(implicit bf: scala.collection.generic.CanBuildFrom[List[sxr.FileWithLineCount],sxr.FileWithLineCount,List[sxr.FileWithLineCount]])List[sxr.FileWithLineCount]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,sxr.FileWithLineCount,List[sxr.FileWithLineCount]]" class="delimiter">{</span><a title="sxr.FileWithLineCount" id="42715">a</a> =&gt; <a href="#42715" title="sxr.FileWithLineCount">a</a>.<a href="#51776" title="(file: java.io.File, lineCount: Option[Int])sxr.FileWithLineCount">copy</a><span class="delimiter">(</span>file = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#37847" title="(file: java.io.File)java.lang.String">path</a><span class="delimiter">(</span><a href="#42715" title="sxr.FileWithLineCount">a</a>.<a href="#39541" title="=&gt; java.io.File">file</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="HtmlWriter.scala.html#9525" title="object sxr.HtmlWriter">HtmlWriter</a>.<a href="HtmlWriter.scala.html#42676" title="=&gt; java.lang.String">HtmlExtension</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span>.<span title="=&gt; List[sxr.FileWithLineCount]">toList</span>
          <a href="HtmlWriter.scala.html#9525" title="object sxr.HtmlWriter">HtmlWriter</a>.<a href="HtmlWriter.scala.html#42692" title="(to: java.io.File, files: List[sxr.FileWithLineCount])Unit">writeIndex</a><span class="delimiter">(</span><a href="#42251" title="java.io.File">d</a>,<a href="#42252" title="List[sxr.FileWithLineCount]">list</a> <a href="#42757" title="(prefix: List[sxr.FileWithLineCount])List[sxr.FileWithLineCount]">:::</a> <a href="#42250" title="(xs: Array[sxr.FileWithLineCount])scala.collection.mutable.ArrayOps[sxr.FileWithLineCount]">directories</a>.<span title="=&gt; List[sxr.FileWithLineCount]">toList</span> <span class="delimiter">)</span> <span class="comment">//TODO</span>
        <span class="comment">// println(d,list.mkString(&quot;\n&quot;)) // debug</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="keyword">catch</span><span class="delimiter">{</span><span class="keyword">case</span> <a title="Unit" id="43276">e</a> =&gt; <a href="#43276" title="java.lang.Throwable">e</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** The entry method for invoking the configured writers to generate the output.*/</span>
  <span class="keyword">def</span> <a title="(externalLinks: List[sxr.LinkMap])Unit" id="27062">generateOutput</a><span class="delimiter">(</span><a title="List[sxr.LinkMap]" id="43577">externalLinks</a>: <span title="List[sxr.LinkMap]">List</span><span class="delimiter">[</span>LinkMap<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[java.io.File]" id="43579">sourceFiles</a> = <a href="#27054" title="=&gt; Browse.this.global.Run">currentRun</a>.<span title="=&gt; Iterator[Browse.this.global.CompilationUnit]">units</span>.<span title="=&gt; List[Browse.this.global.CompilationUnit]">toList</span>.<span title="(f: Browse.this.global.CompilationUnit =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[List[Browse.this.global.CompilationUnit],java.io.File,List[java.io.File]])List[java.io.File]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.io.File,List[java.io.File]]" class="delimiter">(</span><a href="#27063" title="(unit: Browse.this.global.CompilationUnit)Option[java.io.File]">getSourceFile</a><span title="(xo: Option[java.io.File])Iterable[java.io.File]" class="delimiter">(</span><a href="#43823" title="Browse.this.global.CompilationUnit">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#27061" title="(f: List[java.io.File])Any">writeSubDirectoryIndex</a><span class="delimiter">(</span><a href="#43579" title="List[java.io.File]">sourceFiles</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#43579" title="List[java.io.File]">sourceFiles</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="sxr.CompoundLinkMap" id="43896">links</a> = <span title="sxr.CompoundLinkMap" class="keyword">new</span> <a href="LinkMap.scala.html#9533" title="sxr.CompoundLinkMap">CompoundLinkMap</a><span class="delimiter">(</span><a href="#27060" title="=&gt; sxr.LinkMapStore">linkStore</a>.<a href="LinkMap.scala.html#37833" title="(base: Option[java.net.URL])sxr.LinkMap">read</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>, <a href="#43577" title="List[sxr.LinkMap]">externalLinks</a><span class="delimiter">)</span>
      <a href="#43896" title="sxr.CompoundLinkMap">links</a>.<a href="LinkMap.scala.html#43910" title="(srcs: Iterable[String])Unit">clear</a><span class="delimiter">(</span><a href="#43579" title="List[java.io.File]">sourceFiles</a>.<span title="(f: java.io.File =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.io.File],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#27053" title="(source: java.io.File)String">getRelativeSourcePath</a><span class="delimiter">(</span><a href="#43939" title="java.io.File">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; List[String]">toList</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="sxr.OutputWriterContext" id="43897">context</a> = <span title="sxr.OutputWriterContext" class="keyword">new</span> <a href="OutputWriter.scala.html#9552" title="sxr.OutputWriterContext">OutputWriterContext</a><span class="delimiter">(</span><a href="#43579" title="List[java.io.File]">sourceFiles</a>, <a href="#27056" title="=&gt; java.io.File">outputDirectory</a>, <a href="#27054" title="=&gt; scala.tools.nsc.Settings">settings</a>.<span title="=&gt; scala.tools.nsc.Settings#StringSetting">encoding</span>.<span title="=&gt; java.lang.String">value</span>, <a href="#27052" title="=&gt; List[java.net.URL]">externalLinkURLs</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[sxr.OutputWriter]" id="43898">writers</a> = <a href="#27051" title="=&gt; List[sxr.OutputFormat.OutputFormat]">outputFormats</a>.<span title="(f: sxr.OutputFormat.OutputFormat =&gt; sxr.OutputWriter)(implicit bf: scala.collection.generic.CanBuildFrom[List[sxr.OutputFormat.OutputFormat],sxr.OutputWriter,List[sxr.OutputWriter]])List[sxr.OutputWriter]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,sxr.OutputWriter,List[sxr.OutputWriter]]" class="delimiter">(</span><a href="OutputFormat.scala.html#26742" title="(value: sxr.OutputFormat.OutputFormat, context: sxr.OutputWriterContext)sxr.OutputWriter">getWriter</a><span class="delimiter">(</span><a href="#45088" title="sxr.OutputFormat.OutputFormat">_</a>, <a href="#43897" title="sxr.OutputWriterContext">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#43898" title="List[sxr.OutputWriter]">writers</a>.<span title="(f: sxr.OutputWriter =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#45441" title="sxr.OutputWriter">_</a>.<a href="OutputWriter.scala.html#45095" title="()Unit">writeStart</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">for</span><span class="delimiter">(</span><a title="Browse.this.global.CompilationUnit" id="45453">unit</a> &lt;- <a href="#27054" title="=&gt; Browse.this.global.Run">currentRun</a>.<span title="(f: Browse.this.global.CompilationUnit =&gt; Unit)Unit">units</span> ; <a title="java.io.File" id="45458">sourceFile</a> &lt;- <a href="#27063" title="(unit: Browse.this.global.CompilationUnit)Option[java.io.File]">getSourceFile</a><span title="(f: java.io.File =&gt; Unit)Unit" class="delimiter">(</span><a href="#45453" title="Browse.this.global.CompilationUnit">unit</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">{</span>
        <span class="comment">// generate the tokens</span>
        <span class="keyword">val</span> <a title="sxr.wrap.SortedSetWrapper[sxr.Token]" id="45459">tokens</a> = <a href="#27064" title="(unit: Browse.this.global.CompilationUnit)sxr.wrap.SortedSetWrapper[sxr.Token]">scan</a><span class="delimiter">(</span><a href="#45453" title="Browse.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Browse.this.Traverse" id="45460">traverser</a> = <span title="Browse.this.Traverse" class="keyword">new</span> <a href="#27069" title="Browse.this.Traverse">Traverse</a><span class="delimiter">(</span><a href="#45459" title="sxr.wrap.SortedSetWrapper[sxr.Token]">tokens</a>, <a href="#45453" title="Browse.this.global.CompilationUnit">unit</a>.<span title="=&gt; scala.tools.nsc.util.SourceFile">source</span>, <a href="#43896" title="sxr.CompoundLinkMap">links</a><span class="delimiter">)</span>
        <a href="#45460" title="(tree: Browse.this.global.Tree)Browse.this.global.Tree">traverser</a><span class="delimiter">(</span><a href="#45453" title="Browse.this.global.CompilationUnit">unit</a>.<span title="=&gt; Browse.this.global.Tree">body</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[sxr.Token]" id="45461">tokenList</a> = <a href="#45459" title="sxr.wrap.SortedSetWrapper[sxr.Token]">tokens</a>.<a href="Wrappers.scala.html#45535" title="=&gt; List[sxr.Token]">toList</a>
        <a href="Collapse.scala.html#49063" title="(tokens: Iterable[sxr.Token], links: sxr.LinkMap)Unit">Collapse</a><span class="delimiter">(</span><a href="#45461" title="List[sxr.Token]">tokenList</a>, <a href="#43896" title="sxr.CompoundLinkMap">links</a><span class="delimiter">)</span>

        <a href="#43898" title="List[sxr.OutputWriter]">writers</a>.<span title="(f: sxr.OutputWriter =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#49086" title="sxr.OutputWriter">_</a>.<a href="OutputWriter.scala.html#45096" title="(sourceFile: java.io.File, relativeSourcePath: String, tokenList: List[sxr.Token])Unit">writeUnit</a><span class="delimiter">(</span><a href="#45458" title="java.io.File">sourceFile</a>, <a href="#27053" title="(source: java.io.File)String">getRelativeSourcePath</a><span class="delimiter">(</span><a href="#45458" title="java.io.File">sourceFile</a><span class="delimiter">)</span>, <a href="#45461" title="List[sxr.Token]">tokenList</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#43898" title="List[sxr.OutputWriter]">writers</a>.<span title="(f: sxr.OutputWriter =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#49104" title="sxr.OutputWriter">_</a>.<a href="OutputWriter.scala.html#45097" title="()Unit">writeEnd</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#27060" title="=&gt; sxr.LinkMapStore">linkStore</a>.<a href="LinkMap.scala.html#37832" title="(map: sxr.LinkMap)Unit">write</a><span class="delimiter">(</span><a href="#43896" title="sxr.CompoundLinkMap">links</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(unit: Browse.this.global.CompilationUnit)Option[java.io.File]" id="27063">getSourceFile</a><span class="delimiter">(</span><a title="Browse.this.global.CompilationUnit" id="43824">unit</a>: <span title="Browse.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span>: <span title="Option[java.io.File]">Option</span><span class="delimiter">[</span>File<span class="delimiter">]</span> = <a href="#43824" title="Browse.this.global.CompilationUnit">unit</a>.<span title="=&gt; scala.tools.nsc.util.SourceFile">source</span>.<span title="=&gt; scala.tools.nsc.io.AbstractFile">file</span>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span> <span title="Option[java.io.File]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="None.type" class="keyword">null</span> =&gt; <span title="object None">None</span> <span class="comment">// code compiled from the repl has no source file</span>
    <span class="keyword">case</span> <a title="Some[java.io.File]" id="49956">f</a>: <span title="java.io.File">File</span> =&gt; <span title="(x: java.io.File)Some[java.io.File]">Some</span><span class="delimiter">(</span><a href="#49956" title="java.io.File">f</a>.<span title="()java.io.File">getAbsoluteFile</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Tokenizes the given source.  The tokens are put into an ordered set by the start position of the token.
  * Symbols will be mapped back to these tokens by the offset of the symbol.*/</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(unit: Browse.this.global.CompilationUnit)sxr.wrap.SortedSetWrapper[sxr.Token]" id="27064">scan</a><span class="delimiter">(</span><a title="Browse.this.global.CompilationUnit" id="45462">unit</a>: <span title="Browse.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> =
  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="sxr.wrap.SortedSetWrapper[sxr.Token]" id="45465">tokens</a> = wrap.<a href="Wrappers.scala.html#9580" title="object sxr.wrap.Wrappers">Wrappers</a>.<a href="Wrappers.scala.html#45492" title="[V &lt;: java.lang.Comparable[V]]=&gt; sxr.wrap.SortedSetWrapper[V]">treeSet</a><span title="sxr.wrap.SortedSetWrapper[sxr.Token]" class="delimiter">[</span><a href="Token.scala.html#9569" title="sxr.Token">Token</a><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scanner extends Browse.this.global.syntaxAnalyzer.UnitScanner" id="45466">scanner</a> = <a href="#46040" title="Browse.this.global.syntaxAnalyzer.UnitScanner{def parentInit: Unit}" class="keyword">new</a> <a href="#27054" title="anonymous class $anon extends Browse.this.global.syntaxAnalyzer.UnitScanner" id="46040">syntaxAnalyzer</a>.<span title="Browse.this.global.syntaxAnalyzer.UnitScanner">UnitScanner</span><span class="delimiter">(</span><a href="#45462" title="Browse.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="47543">init</a> <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>; <span class="keyword">def</span> <a title="=&gt; Unit" id="47544">parentInit</a> = <a href="#46040" title="Browse.this.global.syntaxAnalyzer.UnitScanner{def parentInit: Unit}" class="keyword">super</a>.<span title="()Unit">init</span> <span class="delimiter">}</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sxr.Browse.iterator28 : (s: Browse.this.global.syntaxAnalyzer.UnitScanner)$anon forSome { type $anon &lt;: java.lang.Object{def iterator: CompatIterator}; type CompatIterator &lt;: java.lang.Object with Iterator[(Int, Int, Int)] with ScalaObject }" id="45467">iterator28</a><span class="delimiter">(</span><a title="Browse.this.global.syntaxAnalyzer.UnitScanner" id="47603">s</a>: syntaxAnalyzer.<span title="Browse.this.global.syntaxAnalyzer.UnitScanner">UnitScanner</span><span class="delimiter">)</span> = 
    <span class="delimiter">{</span>
      <span class="keyword">class</span> <a title="class CompatIterator extends java.lang.Object with Iterator[(Int, Int, Int)] with ScalaObject" id="47604">CompatIterator</a> <a href="#47604" title="ScalaObject" class="keyword">extends</a> <span title="Iterator[(Int, Int, Int)]">Iterator</span><span class="delimiter">[</span><span class="delimiter">(</span>Int, Int, Int<span class="delimiter">)</span><span class="delimiter">]</span>
      <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="()(Browse.this.global.syntaxAnalyzer.Offset, Int, Int)" id="47606">next</a> =
        <span class="delimiter">{</span>
            <span class="keyword">type</span> <a title="CompatIterator extends AnyRef" id="47612">TD</a> = <a href="#47617" title="CompatIterator extends AnyRef" class="delimiter">{</a> <span class="keyword">def</span> offset: Int; <span class="keyword">def</span> lastOffset: Int; <span class="keyword">def</span> token: Int <span class="delimiter">}</span>
            <span class="keyword">class</span> <a title="class Compat extends java.lang.Object with ScalaObject" id="47613">Compat</a> <a href="#47613" title="ScalaObject" class="delimiter">{</a> <span class="keyword">def</span> <a title="=&gt; TD" id="47622">prev</a>: <a href="#47617" title="TD">TD</a> = <span title="Null(null)" class="keyword">null</span>; <span class="keyword">def</span> <a title="=&gt; TD" id="47623">next</a>: <a href="#47617" title="TD">TD</a> = <span title="Null(null)" class="keyword">null</span>; <span class="keyword">def</span> <a title="=&gt; Int" id="47624">offset</a> = <span title="Int(0)" class="int">0</span>; <span class="keyword">def</span> <a title="=&gt; Int" id="47625">token</a> = <span title="Int(0)" class="int">0</span>; <span class="keyword">def</span> <a title="=&gt; Int" id="47626">lastOffset</a> = <span title="Int(0)" class="int">0</span> <span class="delimiter">}</span>
            <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sxr.Browse.CompatIterator.keep27SourceCompatibility : (a: AnyRef)Compat" id="47614">keep27SourceCompatibility</a><span class="delimiter">(</span><a title="AnyRef" id="47641">a</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span>: <a href="#47613" title="Compat">Compat</a> =  <span title="Compat" class="keyword">new</span> <a href="#47613" title="Compat">Compat</a><span class="comment">// won't ever be called</span>
          <span class="keyword">val</span> <a title="Browse.this.global.syntaxAnalyzer.Offset" id="47615">offset</a> = <a href="#47603" title="Browse.this.global.syntaxAnalyzer.UnitScanner">s</a>.<span title="=&gt; Browse.this.global.syntaxAnalyzer.Offset">offset</span>
          <span class="keyword">val</span> <a title="Int" id="47616">token</a> = <a href="#47603" title="Browse.this.global.syntaxAnalyzer.UnitScanner">s</a>.<span title="=&gt; Int">token</span>
          <a href="#47603" title="Browse.this.global.syntaxAnalyzer.UnitScanner">s</a>.<span title="()Unit">nextToken</span>
          <span title="(_1: Browse.this.global.syntaxAnalyzer.Offset, _2: Int, _3: Int)(Browse.this.global.syntaxAnalyzer.Offset, Int, Int)" class="delimiter">(</span><a href="#47615" title="Browse.this.global.syntaxAnalyzer.Offset">offset</a>, <span class="delimiter">(</span><a href="#47603" title="Browse.this.global.syntaxAnalyzer.UnitScanner">s</a>.<span title="=&gt; Browse.this.global.syntaxAnalyzer.Offset">lastOffset</span> <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">-</span> <a href="#47615" title="Browse.this.global.syntaxAnalyzer.Offset">offset</a><span class="delimiter">)</span> <span title="(that: Int)Int">max</span> <span title="Int(1)" class="int">1</span>, <a href="#47616" title="Int">token</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="=&gt; Boolean" id="47607">hasNext</a> = <a href="#47603" title="Browse.this.global.syntaxAnalyzer.UnitScanner">s</a>.<span title="=&gt; Int">token</span> <span title="(x: Int)Boolean">!=</span> Tokens.<span title="Int(0)">EOF</span>
      <span class="delimiter">}</span>
      
      <a href="#45466" title="scanner extends Browse.this.global.syntaxAnalyzer.UnitScanner">scanner</a>.<a href="#47602" title="=&gt; Unit">parentInit</a>
      <a href="#47925" title="java.lang.Object{def iterator: CompatIterator}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="47925" class="delimiter">{</a> <span class="keyword">def</span> <a title="=&gt; CompatIterator" id="47927">iterator</a> = <span title="CompatIterator" class="keyword">new</span> <a href="#47604" title="CompatIterator">CompatIterator</a> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">for</span><span class="delimiter">(</span> <span class="delimiter">(</span><a title="Int" id="48098">offset</a>, <a title="Int" id="48099">length</a>, <a title="Int" id="48100">code</a><span class="delimiter">)</span> &lt;- <a href="#45467" title="implicit sxr.Browse.iterator28 : (s: Browse.this.global.syntaxAnalyzer.UnitScanner)$anon forSome { type $anon &lt;: java.lang.Object{def iterator: CompatIterator}; type CompatIterator &lt;: java.lang.Object with Iterator[(Int, Int, Int)] with ScalaObject }">scanner</a>.<a href="#48057" title="(f: (Int, Int, Int) =&gt; Unit)Unit">iterator</a><span class="delimiter">)</span>
    <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#27065" title="(code: Int)Boolean">includeToken</a><span class="delimiter">(</span><a href="#48100" title="Int">code</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#45465" title="sxr.wrap.SortedSetWrapper[sxr.Token]">tokens</a> <a href="Wrappers.scala.html#45539" title="(t: sxr.Token)Unit">+=</a> <span title="sxr.Token" class="keyword">new</span> <a href="Token.scala.html#9569" title="sxr.Token">Token</a><span class="delimiter">(</span><a href="#48098" title="Int">offset</a>, <a href="#48099" title="Int">length</a>, <a href="#48100" title="Int">code</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="comment">// Comment handling:</span>
    <span class="comment">// in 2.7 comments are included in the token stream</span>
    <span class="comment">// in 2.8 comments are collected separately in unit.comments</span>
    
    <span class="comment">// Compability for 2.7: return no comments with the syntax of 2.8</span>
    <span class="keyword">import</span> <a href="#45462" title="Browse.this.global.CompilationUnit">unit</a>._
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sxr.Browse.noCommentsInScala27 : (u: Browse.this.global.CompilationUnit)java.lang.Object{def comments: Seq[unit.Comment]}" id="45469">noCommentsInScala27</a><span class="delimiter">(</span><a title="Browse.this.global.CompilationUnit" id="48113">u</a>: <span title="Browse.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> = <a href="#48114" title="java.lang.Object{def comments: Seq[unit.Comment]}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="48114" class="delimiter">{</a>
      <span class="keyword">def</span> <a title="=&gt; Seq[unit.Comment]" id="48116">comments</a>: <span title="Seq[unit.Comment]">Seq</span><span class="delimiter">[</span>Comment<span class="delimiter">]</span> = <span title="object Seq">Seq</span>.<span title="Seq[Nothing]">empty</span>
    <span class="delimiter">}</span>
    <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sxr.Browse.rangePositionNeedsStartEndIn27 : (r: scala.tools.nsc.util.RangePosition)java.lang.Object{def start: Int; def end: Int}" id="45470">rangePositionNeedsStartEndIn27</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.RangePosition" id="48153">r</a>: util.<span title="scala.tools.nsc.util.RangePosition">RangePosition</span><span class="delimiter">)</span> = <a href="#48154" title="java.lang.Object{def start: Int; def end: Int}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object" id="48154" class="delimiter">{</a>
      <span class="keyword">def</span> <a title="=&gt; Int" id="48156">start</a> = <span title="Int(0)" class="int">0</span>
      <span class="keyword">def</span> <a title="=&gt; Int" id="48157">end</a> = <span title="Int(0)" class="int">0</span>
    <span class="delimiter">}</span>
    
          <span class="keyword">for</span> <span class="delimiter">(</span>Comment<span class="delimiter">(</span>_, <a title="Browse.this.global.Position" id="48873">pos</a><span class="delimiter">)</span> &lt;- <a href="#45462" title="Browse.this.global.CompilationUnit">unit</a>.<a href="#48758" title="(f: unit.Comment =&gt; Unit)Unit">comments</a><span class="delimiter">)</span>
      <a href="#45465" title="sxr.wrap.SortedSetWrapper[sxr.Token]">tokens</a> <a href="Wrappers.scala.html#45539" title="(t: sxr.Token)Unit">+=</a> <span title="sxr.Token" class="keyword">new</span> <a href="Token.scala.html#9569" title="sxr.Token">Token</a><span class="delimiter">(</span><a href="#48873" title="Browse.this.global.Position">pos</a>.<span title="=&gt; Int">start</span>, <a href="#48873" title="Browse.this.global.Position">pos</a>.<span title="=&gt; Int">end</span> <span title="(x: Int)Int">-</span> <a href="#48873" title="Browse.this.global.Position">pos</a>.<span title="=&gt; Int">start</span> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, Tokens.<span title="Int(97)">COMMENT</span><span class="delimiter">)</span>

    <a href="#45465" title="sxr.wrap.SortedSetWrapper[sxr.Token]">tokens</a>
  <span class="delimiter">}</span>
  <span class="comment">/** Filters out unwanted tokens such as whitespace and commas.  Braces are currently
  * included because () is annotated as Unit, and a partial function created by
  * { case ... } is associated with the opening brace.  */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(code: Int)Boolean" id="27065">includeToken</a><span class="delimiter">(</span><a title="Int" id="48101">code</a>: <span title="Int">Int</span><span class="delimiter">)</span> =
  <span class="delimiter">{</span>
    <span class="keyword">import</span> <span title="object scala.tools.nsc.ast.parser.Tokens">Tokens</span>.<span class="delimiter">{</span>COMMENT, USCORE, isBrace, isKeyword, isIdentifier, isLiteral<span class="delimiter">}</span>
    <a href="#48101" title="Int">code</a> <span title="Boolean" class="keyword">match</span>
    <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Boolean(true)">COMMENT</span> | <span title="Int(73)">USCORE</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">case</span> <span title="Boolean">_</span> =&gt; <span title="(code: Int)Boolean">isKeyword</span><span class="delimiter">(</span><a href="#48101" title="Int">code</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span title="(code: Int)Boolean">isIdentifier</span><span class="delimiter">(</span><a href="#48101" title="Int">code</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span title="(code: Int)Boolean">isLiteral</span><span class="delimiter">(</span><a href="#48101" title="Int">code</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span title="(code: Int)Boolean">isBrace</span><span class="delimiter">(</span><a href="#48101" title="Int">code</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Gets the token for the given offset.*/</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tokens: sxr.wrap.SortedSetWrapper[sxr.Token], offset: Int)Option[sxr.Token]" id="27066">tokenAt</a><span class="delimiter">(</span><a title="sxr.wrap.SortedSetWrapper[sxr.Token]" id="49998">tokens</a>: wrap.<a href="Wrappers.scala.html#9594" title="sxr.wrap.SortedSetWrapper[sxr.Token]">SortedSetWrapper</a><span class="delimiter">[</span>Token<span class="delimiter">]</span>, <a title="Int" id="49999">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Option[sxr.Token]">Option</span><span class="delimiter">[</span>Token<span class="delimiter">]</span> =
  <span class="delimiter">{</span>
    <span class="comment">// create artificial tokens to get a subset of the tokens starting at the given offset</span>
    <span class="comment">// then, take the first token in the range</span>
    <a href="#49998" title="sxr.wrap.SortedSetWrapper[sxr.Token]">tokens</a>.<a href="Wrappers.scala.html#45658" title="(from: sxr.Token, to: sxr.Token)sxr.wrap.SortedSetWrapper[sxr.Token]">range</a><span class="delimiter">(</span><span title="sxr.Token" class="keyword">new</span> <a href="Token.scala.html#9569" title="sxr.Token">Token</a><span class="delimiter">(</span><a href="#49999" title="Int">offset</a>, <span title="Int(1)" class="int">1</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <span title="sxr.Token" class="keyword">new</span> <a href="Token.scala.html#9569" title="sxr.Token">Token</a><span class="delimiter">(</span><a href="#49999" title="Int">offset</a><span title="(x: Int)Int">+</span><span title="Int(1)" class="int">1</span>, <span title="Int(1)" class="int">1</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="Wrappers.scala.html#45656" title="=&gt; Option[sxr.Token]">first</a>
  <span class="delimiter">}</span>

  <span class="comment">/** Filters unwanted symbols, such as packages.*/</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Browse.this.global.Symbol)Boolean" id="27067">ignore</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="50088">s</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <a href="#27068" title="(s: Browse.this.global.Symbol)Boolean">ignoreBase</a><span class="delimiter">(</span><a href="#50088" title="Browse.this.global.Symbol">s</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
    <a href="#50088" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; Boolean">isModuleClass</span> <span title="(x: Boolean)Boolean">||</span> <span class="comment">// ignore the generated class for modules</span>
    <a href="#50088" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; Boolean">isPrimaryConstructor</span> <span class="comment">// the primary constructor overlaps with the class type, so just use the class type</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Browse.this.global.Symbol)Boolean" id="27068">ignoreBase</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="50102">s</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <span title="=&gt; Boolean">!</span><a href="#50102" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; Boolean">exists</span> <span title="(x: Boolean)Boolean">||</span>
    <a href="#50102" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; Boolean">isPackage</span> <span title="(x: Boolean)Boolean">||</span> <span class="comment">// nothing done with packages</span>
    <a href="#50102" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; Boolean">isImplClass</span>
    
  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class Traverse extends Browse.this.global.Traverser with ScalaObject" id="27069">Traverse</a><a href="#27069" title="ScalaObject" class="delimiter">(</a><a title="sxr.wrap.SortedSetWrapper[sxr.Token]" id="48916">tokens</a>: wrap.<a href="Wrappers.scala.html#9594" title="sxr.wrap.SortedSetWrapper[sxr.Token]">SortedSetWrapper</a><span class="delimiter">[</span>Token<span class="delimiter">]</span>, <a title="scala.tools.nsc.util.SourceFile" id="48917">source</a>: <span title="scala.tools.nsc.util.SourceFile">SourceFile</span>, <a title="sxr.LinkMap" id="48918">links</a>: <a href="LinkMap.scala.html#9532" title="sxr.LinkMap">LinkMap</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#27054" title="Browse.this.global.Traverser">Traverser</a>
  <span class="delimiter">{</span>
    <span class="comment">// magic method #1</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Browse.this.global.Tree)Unit" id="48914">traverse</a><span class="delimiter">(</span><a title="Browse.this.global.Tree" id="50202">tree</a>: <span title="Browse.this.global.Tree">Tree</span><span class="delimiter">)</span>
    <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="()Unit" id="50207">handleDefault</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">{</span>
        <a href="#48915" title="(t: Browse.this.global.Tree)Unit">process</a><span class="delimiter">(</span><a href="#50202" title="Browse.this.global.Tree">tree</a><span class="delimiter">)</span>
        <a href="#27069" title="Browse.this.Traverse" class="keyword">super</a>.<span title="(tree: Browse.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#50202" title="Browse.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#50202" title="Browse.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span>
      <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">ValDef</span><span class="delimiter">(</span>_, _, _, <a title="Browse.this.global.Tree" id="50243">rhs</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// tests for synthetic val created for the x in x :: Nil, which would associate the wrong type with ::</span>
          <span class="comment">// because the synthetic val is associated with the :: token</span>
          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50202" title="Browse.this.global.Tree">tree</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#50202" title="Browse.this.global.Tree">tree</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span>Flags.<span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#48914" title="(tree: Browse.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#50243" title="Browse.this.global.Tree">rhs</a><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#50207" title="()Unit">handleDefault</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="Unit">Template</span><span class="delimiter">(</span><a title="List[Browse.this.global.Tree]" id="50507">parents</a>, <a title="Browse.this.global.ValDef" id="50508">self</a>, <a title="List[Browse.this.global.Tree]" id="50509">body</a><span class="delimiter">)</span> =&gt;
          <span class="comment">// If the first parent in the source is a trait, the first parent in parents will be AnyRef and it will</span>
          <span class="comment">// use the trait's token, bumping the trait.  So, this hack processes traits first</span>
          <span class="keyword">val</span> <a href="#50511" title="(List[Browse.this.global.Tree], List[Browse.this.global.Tree])" class="delimiter">(</a><a href="#50510" title="List[Browse.this.global.Tree]" id="50511">traits</a>, <a href="#50510" title="List[Browse.this.global.Tree]" id="50512">notTraits</a><span class="delimiter">)</span> = <a href="#50507" title="List[Browse.this.global.Tree]">parents</a>.<span title="(p: Browse.this.global.Tree =&gt; Boolean)(List[Browse.this.global.Tree], List[Browse.this.global.Tree])">partition</span><span title="(List[Browse.this.global.Tree], List[Browse.this.global.Tree]) @unchecked" class="delimiter">(</span><a href="#50516" title="Browse.this.global.Tree">_</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span>.<span title="=&gt; Boolean">isTrait</span><span class="delimiter">)</span>
          <a href="#27069" title="(trees: List[Browse.this.global.Tree])Unit">traverseTrees</a><span class="delimiter">(</span><a href="#50511" title="List[Browse.this.global.Tree]">traits</a><span class="delimiter">)</span>
          <a href="#27069" title="(trees: List[Browse.this.global.Tree])Unit">traverseTrees</a><span class="delimiter">(</span><a href="#50512" title="List[Browse.this.global.Tree]">notTraits</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#50508" title="Browse.this.global.ValDef">self</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#48914" title="(tree: Browse.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#50508" title="Browse.this.global.ValDef">self</a><span class="delimiter">)</span>
          <a href="#27069" title="(stats: List[Browse.this.global.Tree], exprOwner: Browse.this.global.Symbol)Unit">traverseStats</a><span class="delimiter">(</span><a href="#50509" title="List[Browse.this.global.Tree]">body</a>, <a href="#50202" title="Browse.this.global.Tree">tree</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span><span class="delimiter">)</span>
        <span class="comment">/*case DefDef(_, _, tparams, vparamss, _, rhs) =&gt;
          atOwner(tree.symbol) {
            traverseTrees(tparams); traverseTreess(vparamss); traverse(rhs)
          }*/</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt;
          <a href="#50207" title="()Unit">handleDefault</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="comment">// magic method #2</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: Browse.this.global.Tree)Unit" id="48915">process</a><span class="delimiter">(</span><a title="Browse.this.global.Tree" id="50208">t</a>: <span title="Browse.this.global.Tree">Tree</span><span class="delimiter">)</span>
    <span class="delimiter">{</span>
      <span class="comment">// this implicit exists for 2.7/2.8 compatibility</span>
      <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sxr.Browse.Traverse.source2Option : (s: scala.tools.nsc.util.SourceFile)Option[scala.tools.nsc.util.SourceFile]" id="50536">source2Option</a><span class="delimiter">(</span><a title="scala.tools.nsc.util.SourceFile" id="50540">s</a>: <span title="scala.tools.nsc.util.SourceFile">SourceFile</span><span class="delimiter">)</span>: <span title="Option[scala.tools.nsc.util.SourceFile]">Option</span><span class="delimiter">[</span>SourceFile<span class="delimiter">]</span> = <span title="(x: scala.tools.nsc.util.SourceFile)Some[scala.tools.nsc.util.SourceFile]">Some</span><span class="delimiter">(</span><a href="#50540" title="scala.tools.nsc.util.SourceFile">s</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="[T](f: =&gt; Option[T])Option[T]" id="50537">catchToNone</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="50539">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; Option[T]" id="50544">f</a>: =&gt; Option<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="keyword">try</span> <span class="delimiter">{</span> <a href="#50544" title="=&gt; Option[T]">f</a> <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="None.type" id="50546">e</a>: <span title="UnsupportedOperationException">UnsupportedOperationException</span> =&gt; <span title="object None">None</span> <span class="delimiter">}</span>
      <span class="keyword">for</span><span class="delimiter">(</span><a title="scala.tools.nsc.util.SourceFile" id="50572">tSource</a> &lt;- <a href="#50537" title="(f: =&gt; Option[scala.tools.nsc.util.SourceFile])Option[scala.tools.nsc.util.SourceFile]">catchToNone</a><span title="(f: scala.tools.nsc.util.SourceFile =&gt; Unit)Unit" class="delimiter">(</span><a href="#50208" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Browse.this.global.Position">pos</span>.<a href="#50536" title="implicit sxr.Browse.Traverse.source2Option : (s: scala.tools.nsc.util.SourceFile)Option[scala.tools.nsc.util.SourceFile]">source</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#50572" title="scala.tools.nsc.util.SourceFile">tSource</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#48917" title="scala.tools.nsc.util.SourceFile">source</a>; <a title="Int" id="50577">offset</a> &lt;- <a href="#50208" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Browse.this.global.Position">pos</span>.<span title="(f: Int =&gt; Unit)Unit">offset</span>; <a title="sxr.Token" id="50582">token</a> &lt;- <a href="#27066" title="(tokens: sxr.wrap.SortedSetWrapper[sxr.Token], offset: Int)Option[sxr.Token]">tokenAt</a><span title="(f: sxr.Token =&gt; Unit)Unit" class="delimiter">(</span><a href="#48916" title="sxr.wrap.SortedSetWrapper[sxr.Token]">tokens</a>, <a href="#50577" title="Int">offset</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="()Unit" id="50583">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span> =
        <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50208" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Boolean">hasSymbol</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#27067" title="(s: Browse.this.global.Symbol)Boolean">ignore</a><span class="delimiter">(</span><a href="#50208" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#27070" title="(t: Browse.this.global.Tree, token: sxr.Token, sourceFile: java.io.File, links: sxr.LinkMap)Unit">processSymbol</a><span class="delimiter">(</span><a href="#50208" title="Browse.this.global.Tree">t</a>, <a href="#50582" title="sxr.Token">token</a>, <a href="#48917" title="scala.tools.nsc.util.SourceFile">source</a>.<span title="=&gt; scala.tools.nsc.io.AbstractFile">file</span>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span>, <a href="#48918" title="sxr.LinkMap">links</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="()Unit" id="50584">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#50582" title="sxr.Token">token</a>.<a href="Token.scala.html#12483" title="(t: sxr.TypeAttribute)Unit">tpe</a> = <a href="Token.scala.html#50593" title="(name: String, definition: Option[sxr.Link])sxr.TypeAttribute">TypeAttribute</a><span class="delimiter">(</span><a href="#27073" title="(t: Browse.this.global.Type)String">typeString</a><span class="delimiter">(</span><a href="#50208" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Browse.this.global.Type">tpe</span><span class="delimiter">)</span>, <span title="object None">None</span><span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="(tt: Browse.this.global.TypeTree)Unit" id="50585">processTypeTree</a><span class="delimiter">(</span><a title="Browse.this.global.TypeTree" id="50624">tt</a>: <span title="Browse.this.global.TypeTree">TypeTree</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#27067" title="(s: Browse.this.global.Symbol)Boolean">ignore</a><span class="delimiter">(</span><a href="#50624" title="Browse.this.global.TypeTree">tt</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#27070" title="(t: Browse.this.global.Tree, token: sxr.Token, sourceFile: java.io.File, links: sxr.LinkMap)Unit">processSymbol</a><span class="delimiter">(</span><a href="#50624" title="Browse.this.global.TypeTree">tt</a>, <a href="#50582" title="sxr.Token">token</a>, <a href="#48917" title="scala.tools.nsc.util.SourceFile">source</a>.<span title="=&gt; scala.tools.nsc.io.AbstractFile">file</span>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span>, <a href="#48918" title="sxr.LinkMap">links</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        <a href="#50208" title="Browse.this.global.Tree">t</a> <span title="Unit" class="keyword">match</span>
        <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.ClassDef">ClassDef</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.ModuleDef">ModuleDef</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.ValOrDefDef">ValOrDefDef</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.TypeDef">TypeDef</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="comment">//case _: Super =&gt; processDefaultSymbol()</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.This">This</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Unit" id="50625">s</a>: <span title="Browse.this.global.Select">Select</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.New">New</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <a href="#9485" title="sxr.forScope.Sequence">Sequence</a> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.Alternative">Alternative</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.Star">Star</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.Bind">Bind</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">Apply</span><span class="delimiter">(</span><a title="Browse.this.global.Tree" id="50630">fun</a>, <a title="List[Browse.this.global.Tree]" id="50631">args</a><span class="delimiter">)</span> =&gt;
            <span class="comment">/*val funInfo = fun.symbol.info
            println(&quot;Function: &quot; + fun + &quot;  &quot; + funInfo + &quot;  &quot; + funInfo.getClass)
            funInfo match
            {
              case PolyType(tparams, MethodType(params, resultType) =&gt;
                println(&quot;PolyType method type: &quot; params)
              case MethodType(params, resultType) =&gt;
                println(&quot;MethodType method type: &quot; params)
            }
            println(&quot;Args: &quot; + args.getClass + &quot; &quot; + args.map(_.getClass))
            */</span>
           <span class="comment">//processDefaultSymbol()</span>
            <span class="comment">/*fun match
            {
              case tt: TypeTree =&gt; if(!ignoreBase(tt.symbol)) processTypeTree(tt)
              case _ =&gt; traverse(fun)
            }
            traverseTrees(args)*/</span>
          <span class="comment">//case _: Import =&gt; processSimple()</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.Return">Return</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.If">If</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.Match">Match</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// this will annotate the 'match' keyword with the type returned by the associated pattern match</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.CaseDef">CaseDef</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// this will annotate the 'case' keyword with the type returned by that particular case statement</span>
          <span class="keyword">case</span> <span title="Unit">_</span>: <span title="Browse.this.global.Throw">Throw</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Unit" id="50632">ta</a>: <span title="Browse.this.global.TypeApply">TypeApply</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// this fills in type parameters for methods</span>
          <span class="keyword">case</span> <span title="Unit">Ident</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#50583" title="()Unit">processDefaultSymbol</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">Literal</span><span class="delimiter">(</span><a title="Browse.this.global.Constant" id="50643">value</a><span class="delimiter">)</span> =&gt; <a href="#50584" title="()Unit">processSimple</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="comment">// annotate literals</span>
          <span class="keyword">case</span> <a title="Unit" id="50644">tt</a>: <span title="Browse.this.global.TypeTree">TypeTree</span> =&gt;
            <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50582" title="sxr.Token">token</a>.<a href="Token.scala.html#12495" title="=&gt; Boolean">isPlain</a><span class="delimiter">)</span>
              <a href="#27070" title="(t: Browse.this.global.Tree, token: sxr.Token, sourceFile: java.io.File, links: sxr.LinkMap)Unit">processSymbol</a><span class="delimiter">(</span><a href="#50644" title="Browse.this.global.TypeTree">tt</a>, <a href="#50582" title="sxr.Token">token</a>, <a href="#48917" title="scala.tools.nsc.util.SourceFile">source</a>.<span title="=&gt; scala.tools.nsc.io.AbstractFile">file</span>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span>, <a href="#48918" title="sxr.LinkMap">links</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
    <span class="comment">// magic method #3</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: Browse.this.global.Tree, token: sxr.Token, sourceFile: java.io.File, links: sxr.LinkMap)Unit" id="27070">processSymbol</a><span class="delimiter">(</span><a title="Browse.this.global.Tree" id="50586">t</a>: <span title="Browse.this.global.Tree">Tree</span>, <a title="sxr.Token" id="50587">token</a>: <a href="Token.scala.html#9569" title="sxr.Token">Token</a>, <a title="java.io.File" id="50588">sourceFile</a>: <span title="java.io.File">File</span>, <a title="sxr.LinkMap" id="50589">links</a>: <a href="LinkMap.scala.html#9532" title="sxr.LinkMap">LinkMap</a><span class="delimiter">)</span>
  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Browse.this.global.Symbol" id="50686">sym</a> = <a href="#50586" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span>
    <span class="keyword">def</span> <a title="()Unit" id="50687">addDefinition</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="50688">id</a> = <a href="#50686" title="Browse.this.global.Symbol">sym</a>.<span title="=&gt; Int">id</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#27071" title="(s: Browse.this.global.Symbol)Boolean">publicSymbol</a><span class="delimiter">(</span><a href="#50686" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.lang.String" id="50691">stable</a> = <a href="#27078" title="(sym: Browse.this.global.Symbol)java.lang.String">stableID</a><span class="delimiter">(</span><a href="#50686" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="50692">source</a> = <a href="#27053" title="(source: java.io.File)String">getRelativeSourcePath</a><span class="delimiter">(</span><a href="#50588" title="java.io.File">sourceFile</a><span class="delimiter">)</span>
        <a href="LinkMap.scala.html#43899" title="(src: String, stableID: String, id: Int)Unit">links</a><span class="delimiter">(</span><a href="#50692" title="String">source</a>, <a href="#50691" title="java.lang.String">stable</a><span class="delimiter">)</span> = <a href="#50688" title="Int">id</a>
        <a href="#50587" title="sxr.Token">token</a> <a href="Token.scala.html#12487" title="(stableID: String)Unit">+=</a> <a href="#50691" title="java.lang.String">stable</a>
        <a href="#50587" title="sxr.Token">token</a>.<a href="Token.scala.html#12485" title="(s: String)Unit">source</a> = <a href="#50692" title="String">source</a>
      <span class="delimiter">}</span>
      <a href="#50587" title="sxr.Token">token</a> <a href="Token.scala.html#12486" title="(id: Int)Unit">+=</a> <a href="#50688" title="Int">id</a>
    <span class="delimiter">}</span>
    <a href="#50686" title="Browse.this.global.Symbol">sym</a> <span title="Unit" class="keyword">match</span>
    <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Unit" id="50723">ts</a>: <span title="Browse.this.global.TermSymbol">TermSymbol</span> =&gt;
        <span class="keyword">val</span> <a title="Browse.this.global.Type" id="50724">sType</a> =
          <a href="#50586" title="Browse.this.global.Tree">t</a> <span title="Browse.this.global.Type" class="keyword">match</span>
          <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="Browse.this.global.Type" id="50725">ad</a>: <span title="Browse.this.global.ApplyDynamic">ApplyDynamic</span> =&gt; <a href="#50725" title="Browse.this.global.ApplyDynamic">ad</a>.<span title="=&gt; Browse.this.global.Tree">qual</span>.<span title="=&gt; Browse.this.global.Type">tpe</span>.<span title="(sym: Browse.this.global.Symbol)Browse.this.global.Type">memberType</span><span class="delimiter">(</span><a href="#50725" title="Browse.this.global.ApplyDynamic">ad</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <a title="Browse.this.global.Type" id="50727">s</a>: <span title="Browse.this.global.Select">Select</span> =&gt; <a href="#50727" title="Browse.this.global.Select">s</a>.<span title="=&gt; Browse.this.global.Tree">qualifier</span>.<span title="=&gt; Browse.this.global.Type">tpe</span>.<span title="(sym: Browse.this.global.Symbol)Browse.this.global.Type">memberType</span><span class="delimiter">(</span><a href="#50727" title="Browse.this.global.Select">s</a>.<span title="=&gt; Browse.this.global.Symbol">symbol</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Browse.this.global.Type">_</span> =&gt; <a href="#50723" title="Browse.this.global.TermSymbol">ts</a>.<span title="=&gt; Browse.this.global.Symbol">owner</span>.<span title="=&gt; Browse.this.global.Type">thisType</span>.<span title="(sym: Browse.this.global.Symbol)Browse.this.global.Type">memberType</span><span class="delimiter">(</span><a href="#50723" title="Browse.this.global.TermSymbol">ts</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50724" title="Browse.this.global.Type">sType</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="java.lang.String" id="50732">asString</a> =
            <a href="#50724" title="Browse.this.global.Type">sType</a> <span title="java.lang.String" class="keyword">match</span>
            <span class="delimiter">{</span>
              <span class="keyword">case</span> <a title="java.lang.String" id="50733">mt</a>: <span title="Browse.this.global.MethodType">MethodType</span> <span class="keyword">if</span> <a href="#50723" title="Browse.this.global.TermSymbol">ts</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span>Flags.<span title="Long(512L)">IMPLICIT</span><span class="delimiter">)</span>=&gt; <span title="java.lang.String(&quot;implicit &quot;)" class="string">&quot;implicit &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#27072" title="(s: Browse.this.global.Symbol)String">fullName</a><span class="delimiter">(</span><a href="#50686" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#27073" title="(t: Browse.this.global.Type)String">typeString</a><span class="delimiter">(</span><a href="#50724" title="Browse.this.global.Type">sType</a><span class="delimiter">)</span>
              <span class="keyword">case</span> <span title="String">_</span> =&gt; <a href="#27073" title="(t: Browse.this.global.Type)String">typeString</a><span class="delimiter">(</span><a href="#50724" title="Browse.this.global.Type">sType</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="comment">//println(&quot;Term symbol &quot; + sym.id + &quot;: &quot; + asString)</span>
          <a href="#50587" title="sxr.Token">token</a>.<a href="Token.scala.html#12483" title="(t: sxr.TypeAttribute)Unit">tpe</a> = <a href="Token.scala.html#50593" title="(name: String, definition: Option[sxr.Link])sxr.TypeAttribute">TypeAttribute</a><span class="delimiter">(</span><a href="#50732" title="java.lang.String">asString</a>, <a href="#27075" title="(from: java.io.File, sym: Browse.this.global.Symbol, links: sxr.LinkMap)Option[sxr.Link]">linkTo</a><span class="delimiter">(</span><a href="#50588" title="java.io.File">sourceFile</a>, <a href="#50724" title="Browse.this.global.Type">sType</a>.<span title="=&gt; Browse.this.global.Symbol">typeSymbol</span>, <a href="#50589" title="sxr.LinkMap">links</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="50740">ts</a>: <span title="Browse.this.global.TypeSymbol">TypeSymbol</span> =&gt;
        <span class="keyword">val</span> <a title="Browse.this.global.Type" id="50741">treeType</a> = <a href="#50586" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Browse.this.global.Type">tpe</span>
        <span class="keyword">val</span> <a title="Browse.this.global.Type" id="50742">sType</a> =
          <span title="Browse.this.global.Type" class="keyword">if</span><span class="delimiter">(</span><a href="#50741" title="Browse.this.global.Type">treeType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#27054" title="object Browse.this.global.NoType">NoType</a><span class="delimiter">)</span> <a href="#50740" title="Browse.this.global.TypeSymbol">ts</a>.<span title="=&gt; Browse.this.global.Type">info</span>
          <span class="keyword">else</span> <a href="#50741" title="Browse.this.global.Type">treeType</a>
        <span class="comment">//println(&quot;Type symbol &quot; + sym.id + &quot;: &quot; + typeString(sType))</span>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50742" title="Browse.this.global.Type">sType</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <a href="#50587" title="sxr.Token">token</a>.<a href="Token.scala.html#12483" title="(t: sxr.TypeAttribute)Unit">tpe</a> = <a href="Token.scala.html#50593" title="(name: String, definition: Option[sxr.Link])sxr.TypeAttribute">TypeAttribute</a><span class="delimiter">(</span><a href="#27073" title="(t: Browse.this.global.Type)String">typeString</a><span class="delimiter">(</span><a href="#50742" title="Browse.this.global.Type">sType</a><span class="delimiter">)</span>, <a href="#27075" title="(from: java.io.File, sym: Browse.this.global.Symbol, links: sxr.LinkMap)Option[sxr.Link]">linkTo</a><span class="delimiter">(</span><a href="#50588" title="java.io.File">sourceFile</a>, <a href="#50742" title="Browse.this.global.Type">sType</a>.<span title="=&gt; Browse.this.global.Symbol">typeSymbol</span>, <a href="#50589" title="sxr.LinkMap">links</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50686" title="Browse.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#50686" title="Browse.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#27054" title="object Browse.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
    <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#50586" title="Browse.this.global.Tree">t</a>.<span title="=&gt; Boolean">isDef</span><span class="delimiter">)</span>
        <a href="#50687" title="()Unit">addDefinition</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">else</span>
      <span class="delimiter">{</span>
        <a href="#27075" title="(from: java.io.File, sym: Browse.this.global.Symbol, links: sxr.LinkMap)Option[sxr.Link]">linkTo</a><span class="delimiter">(</span><a href="#50588" title="java.io.File">sourceFile</a>, <a href="#50686" title="Browse.this.global.Symbol">sym</a>, <a href="#50589" title="sxr.LinkMap">links</a><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span>
        <span class="delimiter">{</span>
          <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="sxr.Link" id="50760">x</a><span class="delimiter">)</span> =&gt; <a href="#50587" title="sxr.Token">token</a>.<a href="Token.scala.html#12484" title="(l: sxr.Link)Unit">reference</a> = <a href="#50760" title="sxr.Link">x</a>
          <span class="keyword">case</span> <span title="Unit">None</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="comment">//addDefinition()</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Browse.this.global.Symbol)Boolean" id="27071">publicSymbol</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="50689">s</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
    <span title="=&gt; Boolean">!</span><a href="#50689" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; Boolean">isLocal</span>
  <span class="comment">/** Constructs a decoded fully qualified name for the given symbol. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: Browse.this.global.Symbol)String" id="27072">fullName</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="50734">s</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="String">String</span> =
  <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#50734" title="Browse.this.global.Symbol">s</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#27054" title="object Browse.this.global.NoSymbol">NoSymbol</a>,<span title="java.lang.String(&quot;symbol should not NoSymbol\012&quot;)" class="string">&quot;symbol should not NoSymbol\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Browse.this.global.Symbol" id="50761">owner</a> = <a href="#50734" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; Browse.this.global.Symbol">owner</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#50761" title="Browse.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#27054" title="object Browse.this.global.NoSymbol">NoSymbol</a>,<span title="java.lang.String(&quot;symbol owner should not NoSymbol\012&quot;)" class="string">&quot;symbol owner should not NoSymbol\n&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#50761" title="Browse.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isRoot</span> <span title="(x: Boolean)Boolean">||</span> <a href="#50761" title="Browse.this.global.Symbol">owner</a>.<span title="=&gt; Boolean">isEmptyPackageClass</span><span class="delimiter">)</span>
      <a href="#50734" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; java.lang.String">nameString</span>
    <span class="keyword">else</span>
      <a href="#27072" title="(s: Browse.this.global.Symbol)String">fullName</a><span class="delimiter">(</span><a href="#50761" title="Browse.this.global.Symbol">owner</a>.<span title="=&gt; Browse.this.global.Symbol">enclClass</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#50734" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; java.lang.String">nameString</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Produces a string for the given type that should be informative, but brief.*/</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: Browse.this.global.Type)String" id="27073">typeString</a><span class="delimiter">(</span><a title="Browse.this.global.Type" id="50610">t</a>: <span title="Browse.this.global.Type">Type</span><span class="delimiter">)</span>: <span title="String">String</span> =
  <span class="delimiter">{</span>
    <a href="#50610" title="Browse.this.global.Type">t</a> <span title="String" class="keyword">match</span>
    <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="java.lang.String" id="51437">ct</a>: <span title="Browse.this.global.CompoundType">CompoundType</span> =&gt; <a href="#27074" title="(ct: Browse.this.global.CompoundType, mainPostfix: String)java.lang.String">compoundTypeString</a><span class="delimiter">(</span><a href="#51437" title="Browse.this.global.CompoundType">ct</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="comment">// tries to reduce size of some type strings</span>
      <span class="keyword">case</span> <a title="String" id="51500">pt</a>: <span title="Browse.this.global.PolyType">PolyType</span> =&gt;
        <span class="keyword">import</span> <a href="#51500" title="Browse.this.global.PolyType">pt</a>._
        <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#51500" title="=&gt; List[Browse.this.global.Symbol]">typeParams</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
          <span title="java.lang.String(&quot;=&gt; &quot;)" class="string">&quot;=&gt; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#27073" title="(t: Browse.this.global.Type)String">typeString</a><span class="delimiter">(</span><a href="#51500" title="=&gt; Browse.this.global.Type">resultType</a><span class="delimiter">)</span>
        <span class="keyword">else</span>
        <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="51505">typeParameters</a> = <a href="#51500" title="=&gt; List[Browse.this.global.Symbol]">typeParams</a>.<span title="(f: Browse.this.global.Symbol =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Browse.this.global.Symbol],String,List[String]])List[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</span><a href="#51522" title="Browse.this.global.Symbol">_</a>.<span title="=&gt; String">defString</span><span class="delimiter">)</span>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;[&quot;)" class="string">&quot;[&quot;</span>, <span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="java.lang.String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
          <a href="#51500" title="=&gt; Browse.this.global.Type">resultType</a> <span title="String" class="keyword">match</span>
          <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="java.lang.String" id="51555">ct</a>: <span title="Browse.this.global.CompoundType">CompoundType</span> =&gt; <a href="#27074" title="(ct: Browse.this.global.CompoundType, mainPostfix: String)java.lang.String">compoundTypeString</a><span class="delimiter">(</span><a href="#51555" title="Browse.this.global.CompoundType">ct</a>, <a href="#51505" title="String">typeParameters</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="java.lang.String">_</span> =&gt; <a href="#51505" title="String">typeParameters</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#27073" title="(t: Browse.this.global.Type)String">typeString</a><span class="delimiter">(</span><a href="#51500" title="=&gt; Browse.this.global.Type">resultType</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> <span title="String">_</span> =&gt;
        <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#50610" title="Browse.this.global.Type">t</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">else</span>
          <a href="#50610" title="Browse.this.global.Type">t</a>.<span title="()String">toString</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Converts the given compound type to a string.  'mainPostfix' is copied after the main type symbol
  * but before any parents or refinements*/</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(ct: Browse.this.global.CompoundType, mainPostfix: String)java.lang.String" id="27074">compoundTypeString</a><span class="delimiter">(</span><a title="Browse.this.global.CompoundType" id="51438">ct</a>: <span title="Browse.this.global.CompoundType">CompoundType</span>, <a title="String" id="51439">mainPostfix</a>: <span title="String">String</span><span class="delimiter">)</span> =
  <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#51438" title="Browse.this.global.CompoundType">ct</a>._
    <a href="#51438" title="=&gt; Browse.this.global.Symbol">typeSymbol</a>.<span title="()String">toString</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#51439" title="String">mainPostfix</a> <span title="(x$1: Any)java.lang.String">+</span>
    <span class="delimiter">{</span>
      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#51438" title="Browse.this.global.CompoundType">ct</a>.<span title="=&gt; Browse.this.global.Symbol">typeSymbol</span>.<span title="=&gt; Boolean">isPackageClass</span><span class="delimiter">)</span>
        <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">else</span> <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#51438" title="=&gt; List[Browse.this.global.Type]">parents</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <span class="delimiter">{</span>
        <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#51438" title="=&gt; Browse.this.global.Scope">decls</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
          <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">else</span>
          <a href="#51438" title="=&gt; Browse.this.global.Scope">decls</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;{&quot;)" class="string">&quot;{&quot;</span>, <span title="java.lang.String(&quot;; &quot;)" class="string">&quot;; &quot;</span>, <span title="java.lang.String(&quot;}&quot;)" class="string">&quot;}&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span>
        <a href="#51438" title="=&gt; List[Browse.this.global.Type]">parents</a>.<span title="(start: String, sep: String, end: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot; extends &quot;)" class="string">&quot; extends &quot;</span>, <span title="java.lang.String(&quot; with &quot;)" class="string">&quot; with &quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Generates a link usable in the file 'from' to the symbol 'to', which might be in some other file. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(from: java.io.File, sym: Browse.this.global.Symbol, links: sxr.LinkMap)Option[sxr.Link]" id="27075">linkTo</a><span class="delimiter">(</span><a title="java.io.File" id="50736">from</a>: <span title="java.io.File">File</span>, <a title="Browse.this.global.Symbol" id="50737">sym</a>: <span title="Browse.this.global.Symbol">Symbol</span>, <a title="sxr.LinkMap" id="50738">links</a>: <a href="LinkMap.scala.html#9532" title="sxr.LinkMap">LinkMap</a><span class="delimiter">)</span>: <span title="Option[sxr.Link]">Option</span><span class="delimiter">[</span>Link<span class="delimiter">]</span> =
  <span class="delimiter">{</span>
    <span title="Option[sxr.Link]" class="keyword">if</span><span class="delimiter">(</span><a href="#50737" title="Browse.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <span title="(x: Boolean)Boolean">||</span> <a href="#50737" title="Browse.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#27054" title="object Browse.this.global.NoSymbol">NoSymbol</a> <span title="(x: Boolean)Boolean">||</span> <a href="#50737" title="Browse.this.global.Symbol">sym</a>.<span title="=&gt; Browse.this.global.Symbol">owner</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#27054" title="object Browse.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
      <span title="object None">None</span>
    <span class="keyword">else</span>
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.io.AbstractFile" id="51592">source</a> = <a href="#50737" title="Browse.this.global.Symbol">sym</a>.<span title="=&gt; scala.tools.nsc.io.AbstractFile">sourceFile</span>
      <span title="Option[sxr.Link]" class="keyword">if</span><span class="delimiter">(</span><a href="#51592" title="scala.tools.nsc.io.AbstractFile">source</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
        <a href="#27077" title="(from: java.io.File, sym: Browse.this.global.Symbol, links: sxr.LinkMap)Option[sxr.Link]">externalLinkTo</a><span class="delimiter">(</span><a href="#50736" title="java.io.File">from</a>, <a href="#50737" title="Browse.this.global.Symbol">sym</a>, <a href="#50738" title="sxr.LinkMap">links</a><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <a href="#27076" title="(from: java.io.File, to: java.io.File, id: Int)Some[sxr.Link]">makeLink</a><span class="delimiter">(</span><a href="#50736" title="java.io.File">from</a>, <a href="#51592" title="scala.tools.nsc.io.AbstractFile">source</a>.<span title="=&gt; scala.tools.nsc.io.package.JFile">file</span>, <a href="#50737" title="Browse.this.global.Symbol">sym</a>.<span title="=&gt; Int">id</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(from: java.io.File, to: java.io.File, id: Int)Some[sxr.Link]" id="27076">makeLink</a><span class="delimiter">(</span><a title="java.io.File" id="51601">from</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="51602">to</a>: <span title="java.io.File">File</span>, <a title="Int" id="51603">id</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Some[sxr.Link]">Some</span><span class="delimiter">[</span>Link<span class="delimiter">]</span> =
  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="51613">base</a> = <span title="java.lang.String" class="keyword">if</span><span class="delimiter">(</span><a href="#51602" title="java.io.File">to</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#51601" title="java.io.File">from</a><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="FileUtil.scala.html#9518" title="object sxr.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#11955" title="(fromFile: java.io.File, toFile: java.io.File)String">relativePath</a><span class="delimiter">(</span><a href="#27080" title="(file: java.io.File)java.io.File">relativeSource</a><span class="delimiter">(</span><a href="#51601" title="java.io.File">from</a><span class="delimiter">)</span>, <a href="#27080" title="(file: java.io.File)java.io.File">relativeSource</a><span class="delimiter">(</span><a href="#51602" title="java.io.File">to</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="(x: sxr.Link)Some[sxr.Link]">Some</span><span class="delimiter">(</span><span title="sxr.Link" class="keyword">new</span> <a href="Token.scala.html#9568" title="sxr.Link">Link</a><span class="delimiter">(</span><a href="#51613" title="java.lang.String">base</a>, <a href="#51603" title="Int">id</a>, <span title="object None">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(from: java.io.File, sym: Browse.this.global.Symbol, links: sxr.LinkMap)Option[sxr.Link]" id="27077">externalLinkTo</a><span class="delimiter">(</span><a title="java.io.File" id="51597">from</a>: <span title="java.io.File">File</span>, <a title="Browse.this.global.Symbol" id="51598">sym</a>: <span title="Browse.this.global.Symbol">Symbol</span>, <a title="sxr.LinkMap" id="51599">links</a>: <a href="LinkMap.scala.html#9532" title="sxr.LinkMap">LinkMap</a><span class="delimiter">)</span>: <span title="Option[sxr.Link]">Option</span><span class="delimiter">[</span>Link<span class="delimiter">]</span> =
  <span class="delimiter">{</span>
    <span title="Option[sxr.Link]" class="keyword">if</span><span class="delimiter">(</span><a href="#27071" title="(s: Browse.this.global.Symbol)Boolean">publicSymbol</a><span class="delimiter">(</span><a href="#51598" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.lang.String" id="51639">name</a> = <a href="#27078" title="(sym: Browse.this.global.Symbol)java.lang.String">stableID</a><span class="delimiter">(</span><a href="#51598" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span>
      <a href="LinkMap.scala.html#43901" title="(stable: String)Option[(String, Int)]">links</a><span class="delimiter">(</span><a href="#51639" title="java.lang.String">name</a><span class="delimiter">)</span> <span title="(f: (String, Int) =&gt; sxr.Link)Option[sxr.Link]">map</span> <a href="#51645" title="sxr.Link" class="delimiter">{</a> <span class="keyword">case</span> <span title="sxr.Link" class="delimiter">(</span><a title="String" id="51648">src</a>, <a title="Int" id="51649">id</a><span class="delimiter">)</span>  =&gt; <span title="sxr.Link" class="keyword">new</span> <a href="Token.scala.html#9568" title="sxr.Link">Link</a><span class="delimiter">(</span><a href="#51648" title="String">src</a>, <a href="#51649" title="Int">id</a>, <span title="(x: java.lang.String)Some[java.lang.String]">Some</span><span class="delimiter">(</span><a href="#51639" title="java.lang.String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span>
      <span title="object None">None</span>
  <span class="delimiter">}</span>
  <span class="comment">/** Generates a String identifying the provided Symbol that is stable across runs.
  * The Symbol must be a publicly accessible symbol, such as a method, class, or type member.*/</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Browse.this.global.Symbol)java.lang.String" id="27078">stableID</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="50693">sym</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span> =
  <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="50696">tpe</a> = <span title="java.lang.String" class="keyword">if</span><span class="delimiter">(</span><a href="#50693" title="Browse.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isTerm</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;term&quot;)" class="string">&quot;term&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;type&quot;)" class="string">&quot;type&quot;</span>
    <span class="keyword">val</span> <a title="String" id="50697">name</a> = <a href="#27081" title="object Browse.this.Compat">Compat</a>.<a href="#50700" title="(s: Browse.this.global.Symbol)String">nameString</a><span class="delimiter">(</span><a href="#50693" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.lang.String" id="50698">over</a> = <span title="java.lang.String" class="keyword">if</span><span class="delimiter">(</span><a href="#50693" title="Browse.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isMethod</span><span class="delimiter">)</span> <a href="#50697" title="String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#27079" title="(sym: Browse.this.global.Symbol)String">methodHash</a><span class="delimiter">(</span><a href="#50693" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span> <span class="keyword">else</span> <a href="#50697" title="String">name</a>
    <a href="#50696" title="java.lang.String">tpe</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#50698" title="java.lang.String">over</a>
  <span class="delimiter">}</span>
  <span class="comment">// hack: probably not sufficient to distinguish all possible overloaded methods</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Browse.this.global.Symbol)String" id="27079">methodHash</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="50706">sym</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span> = <a href="FileUtil.scala.html#9518" title="object sxr.FileUtil">FileUtil</a>.<a href="FileUtil.scala.html#11972" title="(s: String)String">hash</a><span class="delimiter">(</span><a href="#50706" title="Browse.this.global.Symbol">sym</a>.<span title="=&gt; Browse.this.global.Type">tpe</span>.<span title="()String">toString</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(file: java.io.File)java.io.File" id="27080">relativeSource</a><span class="delimiter">(</span><a title="java.io.File" id="51621">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#27053" title="(source: java.io.File)String">getRelativeSourcePath</a><span class="delimiter">(</span><a href="#51621" title="java.io.File">file</a>.<span title="()java.io.File">getAbsoluteFile</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="object Browse.this.Compat" id="27081">Compat</a>
  <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: Browse.this.global.Symbol)String" id="50700">nameString</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="50704">s</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#50701" title="implicit sxr.Browse.Compat.symCompat : (sym: Browse.this.global.Symbol)sxr.Browse.Compat.SymCompat">s</a>.<a href="#51662" title="=&gt; String">fullNameString</a>
    <span class="comment">/** After 2.8.0.Beta1, fullNameString was renamed fullName.*/</span>
    <span class="keyword">private</span> <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sxr.Browse.Compat.symCompat : (sym: Browse.this.global.Symbol)sxr.Browse.Compat.SymCompat" id="50701">symCompat</a><span class="delimiter">(</span><a title="Browse.this.global.Symbol" id="51657">sym</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <a href="#50702" title="sxr.Browse.Compat.SymCompat">SymCompat</a> = <span title="sxr.Browse.Compat.SymCompat" class="keyword">new</span> <a href="#50702" title="sxr.Browse.Compat.SymCompat">SymCompat</a><span class="delimiter">(</span><a href="#51657" title="Browse.this.global.Symbol">sym</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class SymCompat extends java.lang.Object with ScalaObject" id="50702">SymCompat</a><a href="#50702" title="ScalaObject" class="delimiter">(</a><a title="Browse.this.global.Symbol" id="51681">s</a>: <span title="Browse.this.global.Symbol">Symbol</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; String" id="51662">fullNameString</a> = <a href="#51681" title="Browse.this.global.Symbol">s</a>.<span title="=&gt; String">fullName</span>; <span class="keyword">def</span> <a title="=&gt; Unit" id="51663">fullName</a> = <a href="#50703" title="=&gt; Unit">sourceCompatibilityOnly</a>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Unit" id="50703">sourceCompatibilityOnly</a> = <a href="#27054" title="(msg: String)Unit">error</a><span class="delimiter">(</span><span title="java.lang.String(&quot;For source compatibility only: should not get here.&quot;)" class="string">&quot;For source compatibility only: should not get here.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="comment">// for compatibility with 2.8</span>
<span class="keyword">package</span> forScope <span class="delimiter">{</span>
  <span class="keyword">class</span> <a title="class Sequence extends java.lang.Object with ScalaObject" id="9485">Sequence</a>
  case <span class="keyword">class</span> <a title="class Comment extends java.lang.Object with ScalaObject with Product with Serializable" id="51770">Comment</a><a href="#51770" title="ScalaObject" class="delimiter">(</a><a title="String" id="51765">v</a>: <span title="String">String</span>, <a title="scala.tools.nsc.util.RangePosition" id="51766">pos</a>: util.<span title="scala.tools.nsc.util.RangePosition">RangePosition</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>