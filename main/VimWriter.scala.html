<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>VimWriter.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sxr -- Scala X-Ray
 * Copyright 2010  Olivier Michallat
 */</span>

<span class="keyword">package</span> sxr.vim

<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File, PrintWriter<span class="delimiter">}</span>
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> sxr.<span class="delimiter">{</span>OutputWriter, OutputWriterContext, OutputInfo, Token<span class="delimiter">}</span>
<span class="keyword">import</span> sxr.<a href="FileUtil.scala.html#9509" title="object sxr.FileUtil">FileUtil</a>.withWriter
<span class="keyword">import</span> sxr.wrap.Wrappers

<span class="keyword">object</span> <a title="object sxr.vim.VimWriter" id="9619">VimWriter</a>
<span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="58033">PublicTags</a> = <span title="java.lang.String(&quot;public-tags&quot;)" class="string">&quot;public-tags&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="58035">PrivateTags</a>  = <span title="java.lang.String(&quot;private-tags&quot;)" class="string">&quot;private-tags&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="58037">RemotePublicTags</a> = <span title="java.lang.String(&quot;remote-public-tags&quot;)" class="string">&quot;remote-public-tags&quot;</span>
  <span class="keyword">val</span> <a title="java.lang.String" id="58039">VimExtension</a> = <span title="java.lang.String(&quot;.txt&quot;)" class="string">&quot;.txt&quot;</span>
<span class="delimiter">}</span>
<span class="keyword">import</span> <a href="#9619" title="object sxr.vim.VimWriter">VimWriter</a>._
<span class="comment">/** Outputs a set of files used by scala_sxr.vim.
 * These consist in: for each source file, a text file listing each token with its offset range,
 * its type, and the optional tag locating its declaration; and a global 'tags' file listing the
 * name, file and offset of each of these tags. */</span>
<span class="keyword">class</span> <a title="class VimWriter extends java.lang.Object with sxr.OutputWriter with ScalaObject" id="9622">VimWriter</a><a href="#9622" title="ScalaObject" class="delimiter">(</a><a title="sxr.OutputWriterContext" id="58064">context</a>: <a href="OutputWriter.scala.html#9542" title="sxr.OutputWriterContext">OutputWriterContext</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="OutputWriter.scala.html#9541" title="sxr.OutputWriter">OutputWriter</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="java.io.File" id="58044">outputDirectory</a> = <a href="#58064" title="sxr.OutputWriterContext">context</a>.<a href="OutputWriter.scala.html#39854" title="=&gt; java.io.File">outputDirectory</a>
  <span class="keyword">val</span> <a title="sxr.OutputInfo" id="58046">info</a> = <span title="sxr.OutputInfo" class="keyword">new</span> <a href="OutputWriter.scala.html#9543" title="sxr.OutputInfo">OutputInfo</a><span class="delimiter">(</span><a href="#58044" title="=&gt; java.io.File">outputDirectory</a>, <a href="#58039" title="=&gt; java.lang.String">VimExtension</a><span class="delimiter">)</span>
  <span class="keyword">import</span> <a href="#58046" title="=&gt; sxr.OutputInfo">info</a>._

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="58049">excluded</a> = <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="[A]=&gt; scala.collection.immutable.Set[A]">empty</span><span title="scala.collection.immutable.Set[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span> <span title="(elems: scala.collection.GenTraversableOnce[String])scala.collection.immutable.Set[String]">++</span> <a href="#58064" title="sxr.OutputWriterContext">context</a>.<a href="OutputWriter.scala.html#39852" title="=&gt; List[java.io.File]">sourceFiles</a>.<span title="(f: java.io.File =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.io.File],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#61138" title="java.io.File">_</a>.<span title="()java.lang.String">getAbsolutePath</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="sxr.vim.TagStore" id="58051">publicTagStore</a> = <span title="sxr.vim.TagStore" class="keyword">new</span> <a href="Tags.scala.html#9608" title="sxr.vim.TagStore">TagStore</a><span class="delimiter">(</span><span title="(x$1: java.io.File, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#58044" title="=&gt; java.io.File">outputDirectory</a>, <a href="#58033" title="=&gt; java.lang.String">PublicTags</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="sxr.wrap.SortedSetWrapper[sxr.vim.Tag]" id="58053">publicTags</a> = <a href="#58051" title="=&gt; sxr.vim.TagStore">publicTagStore</a>.<a href="Tags.scala.html#60959" title="(exclude: Set[String])sxr.wrap.SortedSetWrapper[sxr.vim.Tag]">read</a><span class="delimiter">(</span><a href="#58049" title="=&gt; scala.collection.immutable.Set[String]">excluded</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="sxr.vim.TagStore" id="58055">privateTagStore</a> = <span title="sxr.vim.TagStore" class="keyword">new</span> <a href="Tags.scala.html#9608" title="sxr.vim.TagStore">TagStore</a><span class="delimiter">(</span><span title="(x$1: java.io.File, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#58044" title="=&gt; java.io.File">outputDirectory</a>, <a href="#58035" title="=&gt; java.lang.String">PrivateTags</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="sxr.wrap.SortedSetWrapper[sxr.vim.Tag]" id="58057">privateTags</a> = <a href="#58055" title="=&gt; sxr.vim.TagStore">privateTagStore</a>.<a href="Tags.scala.html#60959" title="(exclude: Set[String])sxr.wrap.SortedSetWrapper[sxr.vim.Tag]">read</a><span class="delimiter">(</span><a href="#58049" title="=&gt; scala.collection.immutable.Set[String]">excluded</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="58059">writeStart</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
    <span class="comment">// Nothing to do</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sourceFile: java.io.File, relativeSourcePath: String, tokenList: List[sxr.Token])Unit" id="58060">writeUnit</a><span class="delimiter">(</span><a title="java.io.File" id="61197">sourceFile</a>: <span title="java.io.File">File</span>, <a title="String" id="61198">relativeSourcePath</a>: <span title="String">String</span>, <a title="List[sxr.Token]" id="61199">tokenList</a>: <span title="List[sxr.Token]">List</span><span class="delimiter">[</span>Token<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">// The data file containing token info for this source file</span>
    <span class="keyword">val</span> <a title="java.io.File" id="61249">outputFile</a> = <a href="OutputWriter.scala.html#56607" title="(relativeSourcePath: String)java.io.File">getOutputFile</a><span class="delimiter">(</span><a href="#61198" title="String">relativeSourcePath</a><span class="delimiter">)</span>

    <a href="FileUtil.scala.html#11939" title="(target: java.io.File)(f: java.io.BufferedWriter =&gt; Unit)Unit">withWriter</a><span class="delimiter">(</span><a href="#61249" title="java.io.File">outputFile</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.io.BufferedWriter" id="61255">output</a> =&gt;
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="sxr.Token" id="61275">token</a> &lt;- <a href="#61199" title="(f: sxr.Token =&gt; Unit)Unit">tokenList</a><span class="delimiter">)</span> <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12482" title="=&gt; Option[sxr.TypeAttribute]">tpe</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="sxr.TypeAttribute" id="61277">t</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="comment">// If this token references a declaration, find the corresponding Vim tag:</span>
          <span class="comment">// if the declaration is in another file, the name of the tag is the stable</span>
          <span class="comment">// ID, otherwise it is the internal token id.</span>
          <span class="keyword">val</span> <a title="String" id="61278">targetTag</a> = <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12483" title="=&gt; Option[sxr.Link]">reference</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="sxr.Link" id="61280">l</a><span class="delimiter">)</span> =&gt; <a href="#61280" title="sxr.Link">l</a>.<a href="Token.scala.html#47506" title="=&gt; Option[String]">stableID</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="String">Some</span><span class="delimiter">(</span><a title="String" id="61282">stable</a><span class="delimiter">)</span> =&gt; <a href="#61282" title="String">stable</a>
              <span class="keyword">case</span> <span title="java.lang.String">_</span> =&gt; <a href="#61280" title="sxr.Link">l</a>.<a href="Token.scala.html#47504" title="=&gt; Int">target</a> <span title="()java.lang.String">toString</span>
            <span class="delimiter">}</span>
            <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)">None</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
          <span class="delimiter">}</span>
          <a href="#61255" title="java.io.BufferedWriter">output</a>.<span title="(x$1: java.lang.String)Unit">write</span><span class="delimiter">(</span><a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12463" title="=&gt; Int">start</a> <span title="(x: String)String">+</span> <span title="java.lang.String(&quot;\011&quot;)" class="string">&quot;\t&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
            <span class="delimiter">(</span><a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12463" title="=&gt; Int">start</a> <span title="(x: Int)Int">+</span> <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12465" title="=&gt; Int">length</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\011&quot;)" class="string">&quot;\t&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
            <a href="#61277" title="sxr.TypeAttribute">t</a>.<a href="Token.scala.html#47483" title="=&gt; String">name</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\011&quot;)" class="string">&quot;\t&quot;</span> <span title="(x$1: Any)java.lang.String">+</span>
            <a href="#61278" title="String">targetTag</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>

          <span class="comment">// If this token defines a symbol, create the corresponding Vim tag(s)</span>
          <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12484" title="=&gt; List[Int]">definitions</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(1)" class="int">1</span>, <span title="java.lang.String(&quot;Definitions were not collapsed for &quot;)" class="string">&quot;Definitions were not collapsed for &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#61275" title="sxr.Token">token</a><span class="delimiter">)</span>
          <span class="comment">// In every case, create the tag with the internal ID. Even if the symbol is public, this tag will</span>
          <span class="comment">// still be used by the clients compiled in the same run.</span>
          <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12484" title="=&gt; List[Int]">definitions</a>.<span title="(f: Int =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><span class="delimiter">(</span>i: <span title="Int">Int</span><span class="delimiter">)</span> =&gt; <a href="#58057" title="=&gt; sxr.wrap.SortedSetWrapper[sxr.vim.Tag]">privateTags</a> <a href="Wrappers.scala.html#41415" title="(t: sxr.vim.Tag)Unit">+=</a> <a href="Tags.scala.html#60948" title="(n: String, f: String, o: Int)sxr.vim.Tag">Tag</a><span class="delimiter">(</span><a href="#61333" title="Int">i</a>.<span title="()java.lang.String">toString</span>, <a href="#61197" title="java.io.File">sourceFile</a>.<span title="()java.lang.String">getAbsolutePath</span>, <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12463" title="=&gt; Int">start</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="comment">// If the symbol is public, also create a tag for each stable ID. These tags will be used by clients</span>
          <span class="comment">// compiled in a different run where this unit would not be recompiled.</span>
          <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12485" title="=&gt; List[String]">stableIDs</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="Unit" id="61341">i</a> :: <a title="List[String]" id="61342">tail</a> =&gt;
              <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12486" title="=&gt; Option[String]">source</a>.<span title="=&gt; Boolean">isDefined</span>, <span title="java.lang.String(&quot;A token with stableIDs should have a source&quot;)" class="string">&quot;A token with stableIDs should have a source&quot;</span><span class="delimiter">)</span>
              <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12485" title="=&gt; List[String]">stableIDs</a>.<span title="(f: String =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="String" id="61366">stable</a> =&gt; <a href="#58053" title="=&gt; sxr.wrap.SortedSetWrapper[sxr.vim.Tag]">publicTags</a> <a href="Wrappers.scala.html#41415" title="(t: sxr.vim.Tag)Unit">+=</a> <a href="Tags.scala.html#60948" title="(n: String, f: String, o: Int)sxr.vim.Tag">Tag</a><span class="delimiter">(</span><a href="#61366" title="String">stable</a>, <a href="#61197" title="java.io.File">sourceFile</a>.<span title="()java.lang.String">getAbsolutePath</span>, <a href="#61275" title="sxr.Token">token</a>.<a href="Token.scala.html#12463" title="=&gt; Int">start</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Unit">Nil</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="Unit">_</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="()Unit" id="58061">writeEnd</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#58051" title="=&gt; sxr.vim.TagStore">publicTagStore</a>.<a href="Tags.scala.html#60958" title="(tags: sxr.wrap.SortedSetWrapper[sxr.vim.Tag])Unit">write</a><span class="delimiter">(</span><a href="#58053" title="=&gt; sxr.wrap.SortedSetWrapper[sxr.vim.Tag]">publicTags</a><span class="delimiter">)</span>
    <a href="#58055" title="=&gt; sxr.vim.TagStore">privateTagStore</a>.<a href="Tags.scala.html#60958" title="(tags: sxr.wrap.SortedSetWrapper[sxr.vim.Tag])Unit">write</a><span class="delimiter">(</span><a href="#58057" title="=&gt; sxr.wrap.SortedSetWrapper[sxr.vim.Tag]">privateTags</a><span class="delimiter">)</span>

    <a href="#58062" title="(file: java.io.File, externalLinkURLs: List[java.net.URL])Unit">writeRemotePublicTags</a><span class="delimiter">(</span><span title="(x$1: java.io.File, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#58044" title="=&gt; java.io.File">outputDirectory</a>, <a href="#58037" title="=&gt; java.lang.String">RemotePublicTags</a><span class="delimiter">)</span>, <a href="#58064" title="sxr.OutputWriterContext">context</a>.<a href="OutputWriter.scala.html#39858" title="=&gt; List[java.net.URL]">externalLinkURLs</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Writes the file containing the path of the 'public-tags' file of each external sxr
   *  location that resolves to a local directory. */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(file: java.io.File, externalLinkURLs: List[java.net.URL])Unit" id="58062">writeRemotePublicTags</a><span class="delimiter">(</span><a title="java.io.File" id="61376">file</a>: <span title="java.io.File">File</span>, <a title="List[java.net.URL]" id="61377">externalLinkURLs</a>: <span title="List[java.net.URL]">List</span><span class="delimiter">[</span>URL<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(url: java.net.URL)java.lang.String" id="61383">buildFilePath</a><span class="delimiter">(</span><a title="java.net.URL" id="61386">url</a>: <span title="java.net.URL">URL</span><span class="delimiter">)</span> = <span title="(x$1: java.io.File, x$2: java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#58063" title="(url: java.net.URL)java.io.File">urlToFile</a><span class="delimiter">(</span><a href="#61386" title="java.net.URL">url</a><span class="delimiter">)</span>, <a href="#58033" title="=&gt; java.lang.String">PublicTags</a><span class="delimiter">)</span>.<span title="()java.lang.String">getAbsolutePath</span>
    <span class="keyword">def</span> <a title="(writer: java.io.PrintWriter, lines: List[String])Unit" id="61384">writeLines</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="61393">writer</a>: <span title="java.io.PrintWriter">PrintWriter</span>, <a title="List[String]" id="61394">lines</a>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="61414">l</a> &lt;- <a href="#61394" title="(f: String =&gt; Unit)Unit">lines</a><span class="delimiter">)</span> <a href="#61393" title="java.io.PrintWriter">writer</a>.<span title="(x$1: java.lang.String)Unit">println</span><span class="delimiter">(</span><a href="#61414" title="String">l</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[java.lang.String]" id="61385">content</a> = <a href="#61377" title="List[java.net.URL]">externalLinkURLs</a>.<span title="(p: java.net.URL =&gt; Boolean)List[java.net.URL]">filter</span><span class="delimiter">(</span><a href="#61423" title="java.net.URL">_</a>.<span title="()java.lang.String">getProtocol</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;file&quot;)" class="string">&quot;file&quot;</span><span class="delimiter">)</span>.<span title="(f: java.net.URL =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.net.URL],java.lang.String,List[java.lang.String]])List[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,java.lang.String,List[java.lang.String]]" class="delimiter">(</span><a href="#61383" title="(url: java.net.URL)java.lang.String">buildFilePath</a><span class="delimiter">)</span>
    <a href="FileUtil.scala.html#11939" title="(target: java.io.File)(f: java.io.BufferedWriter =&gt; Unit)Unit">withWriter</a><span class="delimiter">(</span><a href="#61376" title="java.io.File">file</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.io.BufferedWriter" id="61481">writer</a> =&gt; <a href="#61384" title="(writer: java.io.PrintWriter, lines: List[String])Unit">writeLines</a><span class="delimiter">(</span><span title="java.io.PrintWriter" class="keyword">new</span> <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><a href="#61481" title="java.io.BufferedWriter">writer</a><span class="delimiter">)</span>, <a href="#61385" title="List[java.lang.String]">content</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Converts a &quot;file://...&quot; java.net.URL to a java.io.File.
   * @see http://www2.java.net/blog/2007/04/25/how-convert-javaneturl-javaiofile */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(url: java.net.URL)java.io.File" id="58063">urlToFile</a><span class="delimiter">(</span><a title="java.net.URL" id="61391">url</a>: <span title="java.net.URL">URL</span><span class="delimiter">)</span>: <span title="java.io.File">File</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span title="(x$1: java.net.URI)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#61391" title="java.net.URL">url</a>.<span title="()java.net.URI">toURI</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="java.io.File">_</span> =&gt; <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#61391" title="java.net.URL">url</a>.<span title="()java.lang.String">getPath</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>